<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Template to be used for Making New Registries at Rapportekt • rapRegTemplate</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Template to be used for Making New Registries at Rapportekt">
<meta property="og:description" content="Boilerplate R code for making result services for registries at
  Rapporteket. May be used as templalte for establishin such services or as
  plain exercise for training purposes.">
<meta property="og:image" content="/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">rapRegTemplate</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="http://github.com/Rapporteket/rapRegTemplate/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">


<div class="section level1">
<div class="page-header"><h1 id="lag-et-register-i-rapporteket-">Lag et register i Rapporteket <img src="reference/figures/logo.svg" align="right" height="150"><a class="anchor" aria-label="anchor" href="#lag-et-register-i-rapporteket-"></a>
</h1></div>
<p>Beskrivelsen under er ikke nødvendigvis utfyllende og forutsetter kjennskap til RStudio og bruk av git og GitHub. Som en ekstra støtte anbefales <a href="http://r-pkgs.had.co.nz/" class="external-link">R pacakges</a> av Hadley Wickham og spesielt <a href="http://r-pkgs.had.co.nz/git.html#git-rstudio" class="external-link">beskrivelsen av git og GitHub</a>.</p>
<div class="section level2">
<h2 id="prøv-templatet">Prøv templatet<a class="anchor" aria-label="anchor" href="#pr%C3%B8v-templatet"></a>
</h2>
<ol style="list-style-type: decimal">
<li>Installér pakken <a href="https://github.com/Rapporteket/rapRegTemplate" class="external-link">rapRegTemplate</a> i RStudio (<code>devtools::install_github("Rapporteket/rapRegTemplate")</code>)</li>
<li>Hent ned prosjektet <a href="https://github.com/Rapporteket/rapRegTemplate" class="external-link">rapRegTemplate</a> til RStudio (for mer info, se <a href="https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects" class="external-link">her</a>)</li>
<li>Åpne fila inst/shinyApps/app1/ui.R og start Shiny-applikasjonen (“Run App”)</li>
<li>Navigér i applikasjonen for å se på struktur og farger (innhold mangler)</li>
</ol>
</div>
<div class="section level2">
<h2 id="valgfritt-lag-ditt-eget-prosjekt-basert-på-templatet">Valgfritt: lag ditt eget prosjekt basert på templatet<a class="anchor" aria-label="anchor" href="#valgfritt-lag-ditt-eget-prosjekt-basert-p%C3%A5-templatet"></a>
</h2>
<p>Denne delen er satt som valgfri men kan likevel være relevant, særlig om det er ønskelig å benytte templatetet som utgangspunkt for etablering av nye registre på Rapporteket.</p>
<ol style="list-style-type: decimal">
<li>Lag et nytt prosjekt i RStudio som en R-pakke</li>
<li>Gi pakken et navn som gjerne gjenspeiler overordnet funksjon i pakken, eksempelvis “testRegister”</li>
<li>Valgfritt: hak gjerne av for “Create a git repository” også da det vil gi nyttig kunnskap når egne registre skal utvikles seinere</li>
<li>Trykk “Create Project”.</li>
<li>Kopier inn alle filer fra katalogene “inst/” og “R/” i “rapRegTemplate” og legg disse i tilsvarende kataloger i den nye pakken</li>
<li>I toppen av “server.ui” endre avhengigheten til R-pakken “rapRegTemplate” til din egen R-pakke</li>
<li>Endre DESCRIPTION-fila slik at den blir nogenlunde tilssvarende den som finnes i “rapRegTemplate”, særlig det som er gitt under “Depends:”, “Imports:” og “Remotes:”</li>
<li>Bygg, installér og last pakken i R</li>
<li>Test gjerne at innebygget Shiny-applikasjon fungerer på samme vis som i prosjektet “rapRegTemplate”</li>
</ol>
</div>
<div class="section level2">
<h2 id="last-registerdata">Last registerdata<a class="anchor" aria-label="anchor" href="#last-registerdata"></a>
</h2>
<div class="section level3">
<h3 id="alternativ-1-med-docker-for-rapporteket">Alternativ 1: med Docker for Rapporteket<a class="anchor" aria-label="anchor" href="#alternativ-1-med-docker-for-rapporteket"></a>
</h3>
<ol style="list-style-type: decimal">
<li>Åpne fila R/GetRegData.R</li>
<li>Se på de tre delene av funksjonen som definerer registernavn og sql-spørringen samt den som bruker de to forrige til å hente data (og som returnerer ei dataramme fra funksjonen)</li>
<li>Sjekk at egen konfigurasjon (i fila /home/rstudio/rap_config) er i henhold til det datagrunnlaget som er gjort tilgjengelig</li>
<li>Endre i SQL-spørringen slik at den er i henhold til datagrunnlaget som ønskes benyttet</li>
<li>Prøv funksjonen fra kommandolinja (Console i RStudio), <em>e.g.</em> <code>df &lt;- getRegData("navn_på_register")</code>
</li>
<li>Sjekk at du får returnert ei dataramme med X observasjoner for Y variabler, <em>e.g.</em> <code>attributes(df)</code>
</li>
</ol>
</div>
<div class="section level3">
<h3 id="alternativ-2-uten-docker-for-rapporteket">Alternativ 2: uten Docker for Rapporteket<a class="anchor" aria-label="anchor" href="#alternativ-2-uten-docker-for-rapporteket"></a>
</h3>
<ol style="list-style-type: decimal">
<li>Åpne fila R/GetFakeRegData.R</li>
<li>Se at funksjonen returnerer et kjedelig og irrelevant innebygget datasett :-(</li>
<li>Prøv funksjonen fra kommandolinja (Console i RStudio), <em>e.g.</em> <code>df &lt;- getFakeRegData()</code>
</li>
<li>Sjekk at du får returnert ei dataramme med X observasjoner for Y variabler, <em>e.g.</em> <code>attributes(df)</code>
</li>
</ol>
</div>
</div>
<div class="section level2">
<h2 id="lag-innhold-i-shiny-applikasjonen-steg-1">Lag innhold i Shiny-applikasjonen, steg 1<a class="anchor" aria-label="anchor" href="#lag-innhold-i-shiny-applikasjonen-steg-1"></a>
</h2>
<p>Utgangspunket for de neste stegene er bruk av det innebygde datasettet “mtcars”, jf. “Alternativ 2” over.</p>
<ol style="list-style-type: decimal">
<li>I shiny-applikasjonen, naviger til arkfanen “Figur og tabell”</li>
<li>Åpne fila inst/shinyApps/app1/ui.R</li>
<li>Bla ned til linja <code>tabPanel("Figur og tabell"</code>
</li>
<li>Kommenter inn linjene under, lagre fila og last applikasjonen på nytt (“Reload App”)</li>
<li>Sjekk at det er kommet inn GUI-elementer i arkfanen “Figur og tabell” som før var tom</li>
<li>Prøv gjerne de brukervalg som er i venstre kolonne</li>
<li>Oppgave: gjør endringer i inst/shinyApps/app1/ui.R (på de linjene som nettopp er kommentert inn) slik at maks antall grupper endres fra 10 til 12 i applikasjonen</li>
</ol>
</div>
<div class="section level2">
<h2 id="lag-innhold-i-shiny-applikasjonen-steg-2">Lag innhold i Shiny-applikasjonen, steg 2<a class="anchor" aria-label="anchor" href="#lag-innhold-i-shiny-applikasjonen-steg-2"></a>
</h2>
<ol style="list-style-type: decimal">
<li>Ãpne fila inst/shinyApps/app1/server.R</li>
<li>Bla ned til kommentaren <code># Last inn data</code> og kommenter inn linja under</li>
<li>Bla videre ned til kommentaren <code># Figur og tabell</code> og kommenter inn de linjene som ligger under <code>## Figur</code> og <code>## Tabell</code>, hhv</li>
<li>Sjekk at det er samsvar mellom id-ene definert i inst/shinyApps/app1/ui.R og de datastrukturene (<code>output$distPlot</code> og <code>output$distTable</code>) du nå har definert i inst/shinyApps/app1/server.R</li>
<li>Se at <code>regData</code> gis inn til de funksjoner som lager figur og tabell, hhv</li>
<li>Se også at de samme funksjonene tar i mot de brukervalg som er definert i inst/shinyApps/app1/ui.R (<code>input$var</code> og <code>input$bins</code>)</li>
<li>Valgfritt: ta en titt på funksjonen som lager innholdet i figur og tabell: <code><a href="reference/makeHist.html">?makeHist</a></code>
</li>
<li>Lagre fila, start applikasjonen på nytt og sjekk at figur og tabell er på plass og at disse reagerer på ulike brukervalg</li>
<li>Oppgave A: lag en ny arkfane “Sammendrag” (etter “Figur” og “Tabell”) ved å legge til kode i inst/shinyApps/app1/ui.R</li>
<li>Oppgave B: fyll “Sammendrag” med en tabell som viser <code>summary</code> av valgt variabel ved å legge til kode i inst/shinyApps/app1/server.R</li>
</ol>
<p>Tips til oppgave B:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Sammendrag</span></span>
<span><span class="va">output</span><span class="op">$</span><span class="va">distSummary</span> <span class="op">&lt;-</span> <span class="fu">renderTable</span><span class="op">(</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">regData</span>, <span class="va">summary</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="va">input</span><span class="op">$</span><span class="va">var</span><span class="op">]</span></span>
<span><span class="op">}</span>, rownames <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="lag-innhold-i-shiny-applikasjonen-steg-3">Lag innhold i Shiny-applikasjonen, steg 3<a class="anchor" aria-label="anchor" href="#lag-innhold-i-shiny-applikasjonen-steg-3"></a>
</h2>
<p>Bruk samme tilnærming som over, men for “Samlerapport”. Her er det en del nye elementer, bl.a.</p>
<ul>
<li>bruk av en Rmd-fil som rapportmal</li>
<li>funksjonalitet for nedlasting av rapporten</li>
</ul>
</div>
<div class="section level2">
<h2 id="lag-innhold-i-shiny-applikasjonen-steg-4">Lag innhold i Shiny-applikasjonen, steg 4<a class="anchor" aria-label="anchor" href="#lag-innhold-i-shiny-applikasjonen-steg-4"></a>
</h2>
<p>Denne delen forutsetter bruk av <a href="https://github.com/Rapporteket/docker" class="external-link">Docker for Rapporteket</a> eller tilsvarende utviklingsmiljø¸ som “simulerer” Rapporteket. Her skal hver enkelt bruker kunne bestille rutinemessig tilsending per epost av gitte rapporter, eksempelvis slik som samlerapporten over med predefinerte verdier for “Variabel” og “Antall grupper”. Tilnærmingen introduserer noen nye elementer, slik som:</p>
<ul>
<li>reaktive verdier</li>
<li>lagring av innstillinger som er “varige” også etter at appliksjonen er avsluttet</li>
</ul>
</div>
<div class="section level2">
<h2 id="valgfritt-sjekk-inn-endringer-i-git">Valgfritt: sjekk inn endringer i git<a class="anchor" aria-label="anchor" href="#valgfritt-sjekk-inn-endringer-i-git"></a>
</h2>
<p>Git er et verktøy for versjonskontroll som gir mulighet for å spore endringer og samarbeide om kode. Basale funksjoner i git er svært nyttinge, men kan virke forvirrende i starten. Sørg for at egen kode (bestandig) versjonshåndteres (i git) og at koden finnes sentralisert og tilgjengelig for deg selv og andre (på GitHub).</p>
<ol style="list-style-type: decimal">
<li>Sett opp git lokalt og etabler et sentralt repository for din R-pakke gjennom å følge <a href="http://r-pkgs.had.co.nz/git.html#git-rstudio" class="external-link">Hadley Wickhams veiledning</a>
</li>
<li>Om du ikke har det fra før, etabler et ssh-nøkkelpar for sikker kommunikasjon med GitHub</li>
</ol>
<p>NB Ved etablering av et nøkkelpar for bruk av Secure Shell (ssh) i kommunikasjonen med GitHub (generelt lurt men også nødvendig for avansert bruk av Rapporteket) er det viktig å påse at disse blir etablert på din egen fysiske datamaskin (og eksempelvi ikke inne i en docker-container om det er i bruk)</p>
</div>
<div class="section level2">
<h2 id="valgfritt-dytt-push-r-pakken-til-github">Valgfritt: dytt (push) R-pakken til GitHub<a class="anchor" aria-label="anchor" href="#valgfritt-dytt-push-r-pakken-til-github"></a>
</h2>
<ol style="list-style-type: decimal">
<li>Om du ikke allerede har gjort det, lag din egen bruker på GitHub (se over)</li>
<li>Om du ikke allerede har gjort det, <a href="https://help.github.com/en/articles/adding-a-new-ssh-key-to-your-github-account" class="external-link">legg ut den offentlige delen av ditt ssh-nøkkelpar på din github-konto</a>
</li>
<li>Om du ikke allerede har gjort det, bli medlem av organisasjonen Rapporteket på GitHub</li>
<li>Under din egen side på GitHub, opprett et Repository med navn tilsvarende din egen pakke (<em>e.g.</em> “testRegister”)</li>
<li>I RStudio, push pakken til ditt nye Repository på GitHub</li>
</ol>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="http://github.com/Rapporteket/rapRegTemplate/" class="external-link">Browse source code</a></li>
<li><a href="http://github.com/Rapporteket/rapRegTemplate/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing rapRegTemplate</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Are Edvardsen <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-5210-3656" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>



  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Are Edvardsen.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
